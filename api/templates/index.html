<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="static/css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@1,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Document</title>
</head>
<body>
    <header>
        <div class="top-bar">
            <div class="logo">
                <a class="merakt">MerakT Archivos</a>
            </div>
            <div class="search">
                <input id="buscar-input" class="buscar" type="text" placeholder="  Buscar archivo">
                <a  class="sesion" href="{% url 'paginaLogin' %}">Cerrar Sesion</a>
            </div>
            <div class="user-info">
                <div class="correo">
                    {% if request.session.Email %}
                        {{request.session.user_name}} 
                        {{request.session.user_apellido}} &nbsp;&nbsp;
                        {{request.session.Email}} &nbsp;&nbsp;
                    {% endif %}
                </div>
                <div class="profile-pic">
                </div>
            </div>
        </div>

        <div class="center">
            <h2 class="titulo">Gestor de Archivos</h2>
            <form action="subir_archivo" method="POST" enctype="multipart/form-data" class="upload-form">
                {% csrf_token %}
                {{formulario.as_p}}
                <div class="input-container">
                    <label for="archivo" class="upload-btn">
                        <i class='bx bx-upload'></i> Seleccionar Archivo
                    </label>
                    <input id="archivo" class="archivo-input" type="file" name="archivo" onchange="updateFileName(this)">     
                </div>

                <div id="file-name-container" class="file-name"></div>

                <div class="button-container">
                    <button class="boton1" type="submit">Enviar</button>
                </div>
            </form>
        </div>  
    </header>
    <script>
        function updateFileName(input) {
            var fileNameContainer = document.getElementById('file-name-container');
            var fileName = input.files[0].name;
    
            fileNameContainer.innerHTML = fileName;
        }

        document.addEventListener("DOMContentLoaded", function() {
            var buscarInput = document.getElementById('buscar-input');
    
            buscarInput.addEventListener("click", function() {
                // Redirige a la vista "subir" al hacer clic en el cuadro de b√∫squeda
                window.location.href = "{% url 'subir' %}";
            });
        });
    </script>
</body>
</html>
